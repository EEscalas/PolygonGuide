# How to Create a Competitive Programming Contest Problem using Polygon

The problem creator generates test case inputs using a **test case script**, **generator**, and (optional) **validator**. When a contest participant submits his or her solution, a **checker** can be used to verify if their program's output has valid syntax. Polygon then compares the output of the submitted solution with that of the **solution file** for each of the test case inputs to see if they match, and see if the submitted solution is within the time and memory limits. 

In order to create a basic problem you need:
- [ ] [Problem statement text](#problem-statement-text)
- [ ] [Solution File](#solution-file)
- [ ] [Checker (optional)](#checker)
- [ ] [Test Case Script](#test-case-script)
- [ ] [Generator](#generator)
- [ ] [Validator (optional)](#validator)

## Problem Statement Text
The Problem Statement consists of the following sections:
- [ ] Problem Name
- [ ] Time/Memory Limits
- [ ] Legend
- [ ] Input
- [ ] [Examples](#examples)
- [ ] Notes

For more examples of problem statements, see the [example problem](https://github.com/uclaacm/CodeSprint2020/tree/master/Example_Problem)

Below, you can see where Polygon puts each of these in action:

![Example Problem Statement](GuideFiles/problemStatementExample.PNG)

### Examples
Examples are automatically generated on Polygon using the table of test cases generated by the [test case script](#test-case-script). For the purposes of ICPC CodeSprint2020, we will be automatically making the first three test cases in your [test case script](#test-case-script) your example problems.

## Solution File
A solution file is a .cpp file that is uploaded under the **Solution Files** tab in Polygon.

The **solution file** is the official correct solution for the problem. Test cases in the [test case script](#test-case-script) could compare the output of a submitted solution with the output of this official solution in order to determine the correctness of the submitted solution (see use of `$` in [test case script](#test-case-script)). 

## Checker
A checker is a .cpp file that is uploaded in the **Checker** tab on Polygon. Polygon also contains default checkers you may use.

A **checker** verifies that a user's submitted solution to a problem is outputting a valid output format. This is an optional program that simply acts as a sanity check for submissions before the test cases are run. While you can make your own checker, Polygon also has built-in checker options. You can also find ready-to-use checkers [here](https://github.com/MikeMirzayanov/testlib/tree/master/checkers). [Testlib.h](https://github.com/MikeMirzayanov/testlib) provides functions that help in the creation of checkers.

## Test Case Script
The test case script is a .txt file thats contents are added to the Script section in the **Tests** tab on Polygon.

A test case script is essentially a list of test cases created using [generators](#generator) and their expected outputs. Each line in this script represents a test case, and the call to the generator to generate the test case and the expected output are separated by `>`. There is also the option to indicate that you would like the output to be that of the [solution file](#solution-file). This can be done by indicating `> $`.

For example, if you created a [generator](#generator) called gen.cpp that generated an input for your problem using one number as input, your test case script would look something like this:

```
gen 3 > $
gen 5 > $
gen 1 > $
```

In the example above, you have now created three test cases. In the first test case, whatever is generated by gen 3 will be the input to the submitted solution. The submitted solution output will then be compared to the output of the official solution file (which is indicated by `$`.

## Generator
Generators are .cpp files uploaded into the **Files** tab on Polygon.

Now that we have seen how to outline test cases, we must understand how the input for these test cases are created. A **generator** can seem quite complicated as it takes in values as input and outputs a potential input of your solution. The idea here is that we would like to use large and complex inputs to see if the submitted solution can complete them within the time limitations. These large and complex solutions are quite difficult to come up with by hand, so the generator comes up with valid inputs to your problem automatically.

This is where [Testlib.h](https://github.com/MikeMirzayanov/testlib) is especially helpful! The **registerGen** function allows you to input seeds to generate random numbers. In problem making, you don't want random numbers to be completely random because you want the test cases to be the same for every person submitting a potential solution. What registerGen does is allow you to input a seed, that guarantees that every time the seed value is the same, the random number is the same.

Let's look at the example above with gen.cpp. If the input of our contest problem were simply one integer, gen.cpp could take in that one number we've given as input and generate a random number within a certain range. For example, our gen.cpp file might look something like this:

gen.cpp - Given a seed as input, output a random number between 1 and 10^6, inclusive.
(based on [igen.cpp](https://github.com/MikeMirzayanov/testlib/blob/master/generators/igen.cpp) in testlib.h)

```C++
#include "testlib.h"
#include <iostream>

using namespace std;

int main(int arc, char* argv[])
{

registerGen(argc, argv, 1);
  cout << rnd.next(1,1000000);
  
  return 0;

}
```

In this example, it may seem silly since we could have pretty easily come up with the large random numbers ourselves, but the point is to demonstrate that we could use these random numbers to help generate test cases instead of having to do so ourselves.

In our example, `gen 1 ` might return `84503`, whereas `gen 5` might return `2843`. The important thing that seeds and the **registerGen** function in testlib.h provide is a guarantee that every time `gen 1` is called it will return `84503`. This generates a random number while still guaranteeing that one contest participant does get his or her solution tested using different test cases than anyone else.

## Validator
The validator is a .cpp file that is uploaded in the **Validator** tab in Polygon.

The **validator** acts as a test case for our generator. This optional program verifies that the inputs generated by the generator are valid. For example, in Jacob's [Forest Problem](https://github.com/uclaacm/CodeSprint2020/tree/master/Forest_Problem) his generator generated the number of nodes, number of edges, and pairs of numbers representing the location of each edge with respect to the nodes. His validator in this case verified that the output of his generator produced an input that did in fact represent a valid forest.

# Frequently Asked Questions
- **What is testlib.h?** [Testlib.h](https://github.com/MikeMirzayanov/testlib) is a library that consists of functions that aid in the creation of checkers, generators, and validators. An example of the use of seeds to generate random numbers can be found in [generators](#generator).
